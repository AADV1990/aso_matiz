<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <h:form id="formUsuario">

        <!-- Ejecutar método reiniciarVista() al entrar -->
        <f:metadata>
            <f:viewAction action="#{usuarioController.reiniciarVista}"/>
        </f:metadata>

        <!-- Título del formulario -->
        <h:panelGroup>
            <h:outputText value="Formulario de Usuario" styleClass="text-2xl font-bold mb-4"/>
        </h:panelGroup>
        <div class="formulario-grid grid ui-fluid">

            <!-- Nombre de usuario -->
            <div class="col-12 md:col-6">
                <p:outputLabel for="nombre" value="Nombre de Usuario *"/>
                <p:inputText id="nombre"
                             value="#{usuarioController.usuario.username}"
                             required="true"
                             placeholder="Ej: alcides"
                             styleClass="w-full"/>
            </div>

            <!-- Contraseña -->
            <div class="col-12 md:col-6">
                <p:outputLabel for="clave" value="Contraseña *"/>
                <p:password id="clave"
                            value="#{usuarioController.usuario.password}"
                            feedback="false"
                            styleClass="w-full"
                            required="#{usuarioController.usuario.id == null}"/>
            </div>

            <!-- Rol -->
            <div class="col-12 md:col-6">
                <p:outputLabel for="rol" value="Rol *"/>
                <p:selectOneMenu id="rol"
                                 value="#{usuarioController.idRolSeleccionado}"
                                 required="true"
                                 styleClass="w-full">
                    <f:selectItem itemLabel="Seleccione un rol" itemValue="#{null}" noSelectionOption="true"/>
                    <f:selectItems value="#{usuarioController.listaRoles}"
                                   var="rol"
                                   itemLabel="#{rol.nombre_rol}"
                                   itemValue="#{rol.id}"/>
                </p:selectOneMenu>
            </div>

            <!-- Persona -->
            <div class="col-12 md:col-6">
                <p:outputLabel value="Persona *" for="personaInput"/>
                <div class="ui-inputgroup">
                    <p:inputText id="personaInput"
                                 value="#{usuarioController.usuario.persona.nombres}"
                                 readonly="true"
                                 styleClass="w-full"/>
                    <p:commandButton icon="pi pi-search"
                                     title="Buscar persona"
                                     action="#{personaController.setFormularioOrigen(':abmForm:formUsuario', ':abmForm:formUsuario:personaInput')}"
                                     oncomplete="PF('dlgSeleccionarPersona').show()"
                                     process="@this" update="@none">
                        <f:setPropertyActionListener value="#{usuarioController}"
                                                     target="#{personaController.origen}" />
                    </p:commandButton>
                </div>
            </div>

            <!-- Activo -->
            <div class="col-12 md:col-6">
                <p:outputLabel for="activo" value="Activo"/>
                <p:selectBooleanCheckbox id="activo"
                                         value="#{usuarioController.usuario.activo}"
                                         styleClass="me-2"/>
            </div>

        </div>
    </h:form>
</ui:composition>
